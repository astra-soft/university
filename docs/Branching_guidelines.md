# Рекомендации по работе с ветками

## 1. Основные ветки

### a. Main/Production

- Это стабильная ветка, готовая к деплою на продакшн.
- В этой ветке:
  - Только протестированный код.
  - Никаких экспериментальных изменений.
- Называется `main`.

### b. Develop

- Ветка для объединения всех изменений перед релизом.
- Все новые фичи и исправления проходят через неё перед попаданием в `main`.
- Используется для интеграции и тестирования.

## 2. Когда создавать отдельные ветки

### a. Для новых фич (Feature branches)

- Создавайте ветку для каждой новой фичи.
- Называйте ветки так, чтобы было понятно, что в них делается:
  ```bash
  git checkout -b feature/<short-description>
  ```
- Примеры:
  - `feature/add-user-authentication`
  - `feature/improve-performance`

### b. Для багфиксов (Bugfix branches)

- Если нужно исправить баг, создайте ветку:
  ```bash
  git checkout -b bugfix/<short-description>
  ```
- Примеры:
  - `bugfix/fix-login-issue`
  - `bugfix/fix-memory-leak`

### c. Для улучшений (Enhancement branches)

- Если вы улучшаете существующий функционал:
  ```bash
  git checkout -b enhancement/<short-description>
  ```
- Примеры:
  - `enhancement/refactor-auth-service`
  - `enhancement/update-docs`

### d. Для экспериментов

- Если вы тестируете идеи, создавайте экспериментальную ветку:
  ```bash
  git checkout -b experiment/<short-description>
  ```

## 3. Когда сливать ветку с основной

1. **Фича готова**:

   - Ветка завершена, фича протестирована локально.
   - Создайте Pull Request (PR) в `develop` или `main` (в зависимости от процесса).
   - Дождитесь проверки кода и одобрения коллег (если работаете в команде).

2. **Баг исправлен**:

   - Исправление протестировано и готово.
   - Сливайте напрямую в `develop` или release-ветку.

3. **Эксперимент успешен**:

   - Если эксперимент дал результат, который стоит интегрировать, слейте его с соответствующей веткой.

4. **Перед релизом**:
   - Ветка `develop` сливается в `main`, чтобы зафиксировать стабильную версию для деплоя.

## 4. Рекомендации по слиянию

1. **Используйте Pull Requests**:

   - Создавайте PR для каждой ветки, чтобы ваш код был проверен перед слиянием.

2. **Используйте Squash для коммитов**:

   - Сожмите коммиты ветки в один для чистоты истории:

   ```bash
   git merge --squash feature/<branch-name>
   ```

3. **Разрешайте конфликты заранее**:

   - Если есть конфликты, разрешите их в ветке перед созданием PR.

4. **Удаляйте ветки после слияния**:
   - После слияния удалите локальную и удалённую ветку, чтобы избежать захламления:
   ```bash
   git branch -d feature/<branch-name>
   git push origin --delete feature/<branch-name>
   ```

## 5. Пример рабочего процесса

1. **Добавление новой фичи**:

   ```bash
   git checkout -b feature/add-login
   # Работа над кодом
   git add .
   git commit -m "feat: add login functionality"
   git push origin feature/add-login
   ```

2. **Создание Pull Request**:

   - На GitHub/GitLab создайте PR в `develop`.

3. **Код проверен, протестирован, сливается в develop**:

   ```bash
   git checkout develop
   git merge feature/add-login
   git branch -d feature/add-login
   git push origin develop
   ```

4. **Релиз**:
   - Когда `develop` стабилен, сливается в `main`:
   ```bash
   git checkout main
   git merge develop
   git push origin main
   ```

## 6. Когда не стоит создавать ветку

- Для мелких изменений, которые не затрагивают ключевой функционал, можно коммитить прямо в `develop`.
- Важно: изменения должны быть безопасными и легко откатываемыми.
